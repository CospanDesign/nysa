
_extract_nysa_completer()
{
    local cur prev opts
    #Get the current commands line string
    COMPREPLY=()

    #COMP_WORDS: List of items on the command line
    #COMP_CWORD: Index of the current word in the list
    cur =  "${COMP_WORDS[COMP_CWORD]}"
    prev = "${COMP_WORDS[COMP_CWORD - 1]}"

    opts = "image-builder check-nysa list-device generate-slave -h --help -v --verbose -d --debug"

    #Check to see if the previous command is part of our list of sub commands
		case "${prev}" in
			image-builder)
				local image-builder_opts = "-h --help -o --output -c --compress -z --zip"
				COMPREPLY=( $(compgen -W ${image-builder_opts} -- ${curr}) )
				return 0
				;;
			check-nysa)
				local check-nysa_opts = "-h --help"
				COMPREPLY=( $(compgen -W ${check-nysa_opts} -- ${curr}) )
				return 0
				;;
			list-device)
				local list-device_opts = "-h --help -d --debug -n --name -i --integer"
				COMPREPLY=( $(compgen -W ${list-device_opts} -- ${curr}) )
				return 0
				;;
			generate-slave)
				local generate-slave_opts = "-h --help --axi --memory --slaveid --subid --flags -o --output"
				COMPREPLY=( $(compgen -W ${generate-slave_opts} -- ${curr}) )
				return 0
				;;
			*)
			;;
		esac


    COMPREPLY=($(compgen -W "${opts}" -- ${cur}))
    return 0
}

complete -F _extract_nysa_completer extract_nysa_completer
